"use strict";angular.module("ccue.session",[]).provider("$session",function(){var a,b=localStorage;this.prefix=function(b){a=b},this.$get=[function(){if(!a)throw new Error("must specify a storage prefix");return{get:function(c){return c=a+c,angular.fromJson(b.getItem(c))},set:function(c,d){return"undefined"!=typeof d?(c=a+c,b.setItem(c,angular.toJson(d))):void 0},unset:function(c){return c=a+c,b.removeItem(c)},clear:function(){for(var c,d=b.length-1;d>=0;d--)c=b.key(d),c.startsWith(a)&&b.removeItem(c)}}}]}),angular.module("org",["ngResource","ccue.session"]),angular.module("org").provider("org.resource",function(){var a;this.url=function(b){a=b},this.$get=["$resource",function(b){if(!a)throw new Error("Must configure org.resource.url");return b(a,{},{get:{method:"GET",params:{id:"@id"}}})}]}),angular.module("org").service("organization",["$rootScope","$q","$session","org.resource",function(a,b,c,d){function e(a){return a?a.replace(/\$/g,"$$$$"):void 0}function f(){return l||(l=d.get({id:e(m)}).$promise,l.then(g).then(h),l.then(i)),l}function g(a){c.set("org",a)}function h(){l=void 0}function i(b){a.$broadcast("orgChange",b)}function j(){return c.get("org")}function k(){return c.unset("org")}var l,m;this.use=function(a){if(arguments.length<1)return m;var b=j();b&&b.name===a?i(b):(m=a,k(),f())},this.get=function(){var a=j();if(a&&a.name){var c=b.defer();return c.resolve(a),c.promise}return f()}}]),angular.module("org.translate",["ngCookies","org","pascalprecht.translate"]).run(["orgTranslate",function(a){}]),angular.module("org.translate").factory("org.translate.converter",["org.translate.SUPPORTED_FIELDS",function(a){return{convert:function(b){return a.each(function(a){try{b[a]=JSON.parse(b[a])}catch(c){}}),b}}}]),angular.module("org.translate").filter("orgTranslate",["orgTranslate",function(a){return function(b){return a.translate(b)}}]),angular.module("org.translate").provider("org.translate.resolver",function(){var a="LOCALE";this.cookieName=function(b){a=b},this.$get=["$cookies","$translate",function(b,c){function d(){return b[a]||"unknown"}var e=function(a){if(Object.keys(a).length<1)throw new Error("message catalog must contain at least one value");this.catalog=a};return e.prototype.resolve=function(){var a=d();if(this.lang===a&&this.hasOwnProperty("resolved"))return this.resolved;var b=this.lang=a;if(this.catalog[b])return this.resolved=this.catalog[b];if(b.indexOf("-")>0&&(b=b.split("-")[0],this.catalog[b]))return this.resolved=this.catalog[b];if(c.fallbackLanguage()!==b&&(b=c.fallbackLanguage(),this.catalog[b]))return this.resolved=this.catalog[b];var e=Object.keys(this.catalog).first();return this.resolved=this.catalog[e]},e}]}),angular.module("org.translate").service("orgTranslate",["$q","$rootScope","organization","org.translate.converter","org.translate.resolver","org.translate.SUPPORTED_FIELDS",function(a,b,c,d,e,f){function g(){return c.get().then(function(a){j=d.convert(a)})}function h(){k={};var b=a.defer();return f.each(function(a){j.hasOwnProperty(a)&&("string"==typeof j[a]&&(j[a]={"*":j[a]}),k[a]=new e(j[a]))}),b.resolve()}function i(){g().then(h).then(function(){l=!0})}var j,k={},l=!1;this.translate=function(a){return l?k[a]?k[a].resolve():j[a]:void 0},b.$on("orgChange",function(a){i()})}]),angular.module("org.translate").constant("org.translate.SUPPORTED_FIELDS",["portalTitle","portalWelcomeMsg","portalFooterMsg","disclaimerText"]),angular.module("org.theme",["pascalprecht.translate","ccue.session","org"]).run(["orgTheme","orgRtl",function(a,b){}]),angular.module("org.theme").directive("orgThemeDir",["orgRtl",function(a){return{restrict:"A",link:function(b,c){function d(a){return a?"rtl":"ltr"}b.$watch(function(){return a.isRtl()},function(a){c.attr("dir",d(a))})}}}]),angular.module("org.theme").directive("orgThemeHtmlLang",["$translate",function(a){return{restrict:"A",link:function(b){b.$watch(function(){return a.uses()},function(a){angular.element("html").attr("lang",a)})}}}]),angular.module("org.theme").service("orgRtl",["$rootScope","$translate",function(a,b){function c(){var c=b("rtl"),e=c&&"rtl"!==c?"true"===c:!1;e!==d&&(d=e,a.$broadcast("rtl:changeSuccess",e))}var d;a.$on("$translateChangeSuccess",function(){c()}),this.isRtl=function(){return d||!1}}]),angular.module("org.theme").provider("orgTheme",function(){var a="bower_components/";this.useBase=function(a){this.baseUrl=a},this.$get=["$rootScope","$http","$translate","$session","organization","orgRtl",function(b,c,d,e,f,g){function h(a){return e.get(j(a))}function i(a,b){e.set(j(a),b)}function j(a){return d.uses()+":"+a}function k(){return angular.element("#styleLink").attr("href")}function l(a){angular.element("#styleLink").attr("href",a)}function m(b,c){var d=a+b+"/dist/main";return d+=c?"-rtl.css":".css"}function n(a){var b=r.find(function(b){return b.displayName===a});return b?b.value:a}function o(a){return a===k()}function p(a,b,d){d=d||function(){};var e=h(a);e?l(e):(e=m(a,b),o(e)?i(a,e):c.get(e,{}).success(function(){l(e),i(a,e)}).error(function(){d("Could not load theme "+a)}))}function q(){s.org&&f.get().then(function(a){var b=a.themeName||"mpp-theme",c=n(b);p(c,g.isRtl(),function(a){console.error(a),g.isRtl()&&p(c,!1)})})}var r=[{displayName:"HP Simplified",value:"mpp-theme"},{displayName:"HP Playful",value:"mpp-pilot-theme"},{displayName:"HP Enterprise",value:"mpp-enterprise-theme"}],s={org:!1};b.$on("rtl:changeSuccess",function(){s.org&&q()}),b.$on("orgChange",function(){s.org=!0,q()})}]}),angular.module("org.security",["org"]),angular.module("org.security").directive("securityBanner",function(){return{template:'<div ng-if="org.securityLevel" class="security-banner" ng-class="org.securityLevel.toLowerCase()"><div class="container"><span translate="">{{\'security.labels.\'.concat(org.securityLevel.toUpperCase())}}</span></div></div>',restrict:"E",replace:!0,scope:!0,controller:["$scope","organization",function(a,b){b.get().then(function(b){a.org=b}),a.$on("orgChange",function(b){a.org=b})}]}});